<div class="card-viz-container">
  <div class="loading-block" ng-if="$ctrl.loading">
    <div class="spinner-container">
      <span class="spinner fa fa-spinner fa-pulse"></span>
      <p class="spinner-text text-light" data-translate="USER_PROMPTS.CARD_VIZ.READING"></p>
    </div>
  </div>

  <div class="error-block" ng-if="!$ctrl.loading && $ctrl.errorReadingCard">
    <span class="spinner fa fa-warning"></span>
    <p class="error-text text-thin" data-translate="ERROR.READING_CARD"></p>
    <a class="try-again clickable" data-ng-click="$ctrl.readAnother()" data-translate="USER_PROMPTS.TRY_AGAIN"></a>
  </div>

  <div class="error-block" ng-if="!$ctrl.loading && $ctrl.unknownCard">
    <span class="spinner fa fa-question-circle"></span>
    <p class="error-text text-thin" data-translate="ERROR.NOT_SUPPORTED"></p>
    <p class="info-text text-thin">
      <span data-translate="INFO.SUPPORTED_CARDS"></span> <a class="clickable" data-ng-click="$ctrl.showSupportedCardTypes()" data-translate="COMMON.HERE"></a>.
    </p>
    <span class="try-again" data-translate="USER_PROMPTS.INSERT_DIFF_CARD"></span>

    <div class="feedback">
      <div class="unknown-card-form" ng-hide="$ctrl.submitted">
        <p class="text-thin text-left" data-translate="CARD_FEEDBACK.FUTURE_SUPPORT"></p>
        <form data-ng-submit="$ctrl.registerUnknownType(cardDesc)" class="form-inline">
          <input type="text"
                 placeholder="{{ 'CARD_FEEDBACK.CARD_DESC' | translate }}"
                 class="form-control"
                 data-ng-model="cardDesc"
                 autofocus>
          <span type="submit" id="submit" class="btn btn-default" data-ng-click="$ctrl.registerUnknownType(cardDesc)" data-translate="COMMON.SUBMIT"></span>
        </form>
      </div>
      <p class="info-text text-thin" data-ng-show="$ctrl.submitted" data-translate="CARD_FEEDBACK.THANK_YOU"></p>
    </div>
  </div>

  <div class="card-viz" ng-if="!$ctrl.loading && !$ctrl.errorReadingCard && !$ctrl.unknownCard">
    <div class="card-type"><span class="text-light">
      <span data-translate="COMMON.CARD_TYPE"></span>:</span>
      <span class="text-bold">{{$ctrl.cardTypePretty}}</span>
    </div>

    <div class="viz-container">
      <beid-visualizer rn-data="$ctrl.cardData.rn"
                       address-data="$ctrl.cardData.address"
                       pic-data="$ctrl.cardData.picture"
                       cert-data="$ctrl.cardData"
                       reader-id="$ctrl.readerId"
                       ng-if="$ctrl.cardType === 'beid'"></beid-visualizer>

      <dnie-visualizer ng-if="$ctrl.cardType === 'dnie'"
                       reader-id="$ctrl.readerId"
                       card-data="$ctrl.cardData"></dnie-visualizer>

      <emv-visualizer data="$ctrl.cardData" reader-id="$ctrl.readerId" ng-if="$ctrl.cardType === 'emv'"></emv-visualizer>

      <lux-visualizer reader-id="$ctrl.readerId" ng-if="$ctrl.cardType === 'luxeid'"></lux-visualizer>
      <lux-trust-visualizer card-data="$ctrl.cardData"
                            reader-id="$ctrl.readerId"
                            ng-if="$ctrl.cardType === 'luxtrust'"></lux-trust-visualizer>
      <lux-otp-visualizer card-data="$ctrl.cardData"
                          reader-id="$ctrl.readerId"
                          ng-if="$ctrl.cardType === 'ocra'"></lux-otp-visualizer>

      <mobib-viz card-data="$ctrl.cardData" reader-id="$ctrl.readerId" is-basic="$ctrl.cardTypePretty === 'MOBIB Basic'"
                 ng-if="$ctrl.cardType === 'mobib'"></mobib-viz>

      <oberthur-visualizer card-data="$ctrl.cardData"
                           reader-id="$ctrl.readerId"
                           ng-if="$ctrl.cardType === 'oberthur'"></oberthur-visualizer>

      <piv-visualizer ng-if="$ctrl.cardType === 'piv'" reader-id="$ctrl.readerId" card-data="$ctrl.cardData"></piv-visualizer>
      <pteid-visualizer ng-if="$ctrl.cardType === 'pteid'" reader-id="$ctrl.readerId" card-data="$ctrl.cardData"></pteid-visualizer>
    </div>
  </div>
</div>
